(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5235],{3051:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/step-4",function(){return n(5125)}])},9017:function(e,t,n){"use strict";var a=n(5893),i=n(2617),_=n(3513),l=n.n(_),o=n(3967),r=n.n(o);t.Z=({theme:e,children:t,...n})=>(0,a.jsxs)("button",{id:"customBtn",className:r()(l()["google-sign"],{[l()[`theme-${e}`]]:e}),type:"button","aria-label":t,...n,children:[(0,a.jsx)(i.Fd,{className:l()["google-sign__icon"]}),t]})},5125:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return O},default:function(){return P}});var a=n(5893),i=n(9008),_=n.n(i),l=n(6310),o=n(4640),r=n(1163),s=n(7294),c=n(6003),p=n(5007),u=n(2617),m=n(6094),f=n(4298),g=n.n(f),d=n(5066),h=n(9017),v=n(5050),S=n(6109),b=n(1181),y=n(3967),E=n.n(y),x=n(901),w=n.n(x);let{GOOGLE_OATH_CLIENT_ID:j,DOMAIN:k}=b;var N=({routeNext:e})=>{let t=(0,o.useTranslations)("stepEmail"),{locale:n,push:i}=(0,r.useRouter)(),f=(0,p.I0)(),[b,y]=(0,s.useState)(null),[x,N]=(0,s.useState)(null),[O,P]=(0,s.useState)(!0),A=(0,p.v9)(v.cQ),I=(0,p.v9)(S.eV),K=l.Ry().shape({email:l.Z_().email(t("email.invalid")).test("is-valid-domain",t("email.invalid"),e=>!!e&&/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)).required(t("email.required"))}),T=()=>{b.requestAccessToken()},D=async()=>{try{await fetch(`https://www.googleapis.com/oauth2/v2/userinfo?access_token=${x}`).then(e=>e.json()).then(({email:e})=>{f((0,v.vV)(e)),P(!1)})}catch(e){(0,c.eK)({error:e})}},F=async({email:t},{setSubmitting:a,resetForm:_,setErrors:l})=>{try{a(!0);let l=sessionStorage.getItem("activities"),o=sessionStorage.getItem("invisibleMode");if(!(await fetch("/backend/add-email",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","x-id":`${k}`,brand:"spynger"},body:JSON.stringify({email:t,country:I,locale:n,events:[...l?[{name:"trackActivities",value:l}]:[],...o?[{name:"invisibleMode",value:o}]:[]]})})).ok)throw Error("Server error");_(),i(`${e}`)}catch(e){(0,c.eK)({error:e}),l({submit:"Failed to submit"})}a(!1)},M=({email:e,setFieldValue:t,showGoogleSignIn:n})=>((0,s.useEffect)(()=>{e&&n&&t("email",e)},[e]),null),L=e=>t=>{let n=t?.target?.value??"";e("email",n),f((0,v.vV)(n))};return(0,s.useEffect)(()=>{x&&D()},[x]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(_(),{children:[(0,a.jsx)("title",{children:t("pageTitle")}),(0,a.jsx)("meta",{name:"description",content:t("pageDescription")}),(0,a.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),(0,a.jsx)(g(),{id:"google-auth",src:"https://accounts.google.com/gsi/client",onReady:()=>{void 0!==google&&y(google?.accounts?.oauth2?.initTokenClient({client_id:j,scope:"https://www.googleapis.com/auth/userinfo.email",callback:e=>{N(e.access_token)}}))}}),(0,a.jsx)("div",{className:w().funnel,children:(0,a.jsx)("div",{className:w()["funnel-pages"],children:(0,a.jsxs)("div",{className:E()("wrapper",w()["funnel-pages__wrapper"]),children:[(0,a.jsx)("span",{className:w()["funnel__step-text"],dangerouslySetInnerHTML:{__html:t.raw("step")}}),(0,a.jsx)("h2",{className:E()(w().headline,w().funnel__headline,"headline--lvl2"),dangerouslySetInnerHTML:{__html:t.raw("title")}}),(0,a.jsx)(d.J9,{initialValues:{email:""},onSubmit:F,validationSchema:K,children:({isSubmitting:e,errors:n,touched:i,values:_,setFieldValue:l})=>(0,a.jsxs)(d.l0,{className:w()["funnel-pages__form"],children:[O&&null!==b&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{onClick:T,children:t("titleGoogle")}),(0,a.jsx)("div",{className:w()["create-account__separator"],children:(0,a.jsx)("span",{className:w()["create-account__separator-text"],children:t("or")})})]}),(0,a.jsxs)("div",{className:E()(w()["input-field"],w()["funnel-pages__emailInput"]),children:[(0,a.jsx)(d.gN,{name:"email",placeholder:`${t("email.label")}:`,as:m.o,className:E()(w().form__value,w()["custom-input__element"],n.email&&i.email?"p-invalid":""),onChange:L(l)}),(0,a.jsx)(M,{email:A,setFieldValue:l,showGoogleSignIn:O}),n.email&&i.email?(0,a.jsx)("p",{id:"name-help",className:"p-error",children:n.email}):null]}),(0,a.jsx)("p",{className:w()["funnel-pages__terms"],children:t.rich("policy",{privacy:e=>(0,a.jsx)(u.xb,{href:"/privacy-policy",children:e}),eula:e=>(0,a.jsx)(u.xb,{href:"/eula",children:e})})}),(0,a.jsx)(u.zx,{type:"submit",theme:"orange","aria-label":t("button"),className:E()(w()["funnel-pages__button"],w().email),disabled:""===_.email||!!n.email,children:t("button")})]})})]})})})]})},O=!0,P=()=>(0,a.jsx)(N,{routeNext:"step-5"})},3513:function(e){e.exports={"google-sign":"GoogleSign_google-sign__wnT3_","google-sign__icon":"GoogleSign_google-sign__icon__r6_0j","theme-mainFunnel":"GoogleSign_theme-mainFunnel__Yw6JS"}},901:function(e){e.exports={funnel:"StepEmail_funnel__LlPyf",funnel__image:"StepEmail_funnel__image__mx64R",funnel__step:"StepEmail_funnel__step__GQ_7L","funnel__step-text":"StepEmail_funnel__step-text__zae4I",funnel__headline:"StepEmail_funnel__headline__m27DT",funnel__text:"StepEmail_funnel__text__cN8Vu","funnel--email-confirmed":"StepEmail_funnel--email-confirmed__Djilk",funnel__discount:"StepEmail_funnel__discount__qSNUW","funnel-pages":"StepEmail_funnel-pages__hmcMb","funnel-pages__wrapper":"StepEmail_funnel-pages__wrapper__crhvr",step2:"StepEmail_step2__DM2O_","funnel-pages__wrapper-content":"StepEmail_funnel-pages__wrapper-content__958n6","funnel-pages__button-list":"StepEmail_funnel-pages__button-list__qEqwI","funnel-pages__device-button":"StepEmail_funnel-pages__device-button__WifDk","funnel-pages__device-icon":"StepEmail_funnel-pages__device-icon__BC75s","funnel-pages__device-icon--ios":"StepEmail_funnel-pages__device-icon--ios__T9_bw","funnel-pages__device-icon--android":"StepEmail_funnel-pages__device-icon--android__AcGnS","funnel-pages__item-arrow-icon":"StepEmail_funnel-pages__item-arrow-icon__jeL0V","funnel-pages__device-name":"StepEmail_funnel-pages__device-name__LtoGY","funnel-pages__device-wrapper":"StepEmail_funnel-pages__device-wrapper__AN2eE","funnel-pages__text":"StepEmail_funnel-pages__text__xJKFt",bottom:"StepEmail_bottom__O00Di","funnel-pages__input-item":"StepEmail_funnel-pages__input-item__Aw6S6","funnel-pages__input":"StepEmail_funnel-pages__input__Y5a5k",active:"StepEmail_active__efvdi","funnel-pages__input-text":"StepEmail_funnel-pages__input-text__e1SFs","funnel-pages__invisible-container":"StepEmail_funnel-pages__invisible-container__Q7S6h","funnel-pages__invisible-title-wrapper":"StepEmail_funnel-pages__invisible-title-wrapper__e8XvM","funnel-pages__info-icon":"StepEmail_funnel-pages__info-icon__Jb1HR","funnel-pages__invisible-title":"StepEmail_funnel-pages__invisible-title__o2uha","funnel-pages__invisible-description":"StepEmail_funnel-pages__invisible-description__J2C4M","funnel-pages__invisible-buttons-wrapper":"StepEmail_funnel-pages__invisible-buttons-wrapper__TRnKO","funnel-pages__emailInput":"StepEmail_funnel-pages__emailInput__yHP7M","funnel-pages__gdprInput":"StepEmail_funnel-pages__gdprInput__iVWye","funnel-pages__terms":"StepEmail_funnel-pages__terms__hJJMy","funnel-pages__form":"StepEmail_funnel-pages__form__hXOYh","funnel-pages__hidden-chackbox":"StepEmail_funnel-pages__hidden-chackbox__INyce","funnel-pages__button":"StepEmail_funnel-pages__button__ExZnw",next:"StepEmail_next__yYHKd",email:"StepEmail_email__bZ7cO",gdpr:"StepEmail_gdpr__tapaQ",invisible:"StepEmail_invisible__jWT7h",orange:"StepEmail_orange__4jpSp",compatibility:"StepEmail_compatibility__YLXE3",compatibility__wrapper:"StepEmail_compatibility__wrapper__HMnO6",compatibility__devices:"StepEmail_compatibility__devices__2OstW",compatibility__text:"StepEmail_compatibility__text__L0lQ3",compatibility__search:"StepEmail_compatibility__search__Au_Wx",search:"StepEmail_search__AQb4v",search__autocomplete:"StepEmail_search__autocomplete__i5J6g","search__autocomplete-item":"StepEmail_search__autocomplete-item__KLk9i","search__input-wrapper":"StepEmail_search__input-wrapper__qGZXG",search__input:"StepEmail_search__input__fowzp",search__button:"StepEmail_search__button__G7l3g",search__result:"StepEmail_search__result__IR2l1","search__result--ok":"StepEmail_search__result--ok__AyFtu","search__result-container--ok":"StepEmail_search__result-container--ok__m1ANl","search__result--no":"StepEmail_search__result--no__y72Pq","search__result-container--no":"StepEmail_search__result-container--no__wj_hD","search__result-container":"StepEmail_search__result-container__HdMWB","search__result-icon-wrapper":"StepEmail_search__result-icon-wrapper__D3zlz","search__result-icon":"StepEmail_search__result-icon__NGsgN","search__search-icon":"StepEmail_search__search-icon__1wTUt","custom-input":"StepEmail_custom-input__Tk1FQ","custom-input__element":"StepEmail_custom-input__element__YNneN","google-sign":"StepEmail_google-sign___yeSv","google-sign__icon":"StepEmail_google-sign__icon__cF5hL","create-account__wrapper":"StepEmail_create-account__wrapper__2L0H_","create-account__google-sign":"StepEmail_create-account__google-sign__SefwR","create-account__separator":"StepEmail_create-account__separator__9kA0a","create-account__separator-text":"StepEmail_create-account__separator-text__Zjyqe","create-account__input":"StepEmail_create-account__input__gXPQK","create-account__checkbox":"StepEmail_create-account__checkbox__AmnKa","create-account__button":"StepEmail_create-account__button__fUx2v","create-account__link":"StepEmail_create-account__link__NRS1Q","input-field":"StepEmail_input-field__7ZaoX","is-error":"StepEmail_is-error__v_KeP","input-field__message":"StepEmail_input-field__message__M1iOc","custom-checkbox":"StepEmail_custom-checkbox__aLSlj","custom-checkbox__input":"StepEmail_custom-checkbox__input__v0N6A","custom-checkbox__label":"StepEmail_custom-checkbox__label__3LaeC"}},4298:function(e,t,n){e.exports=n(2892)},6094:function(e,t,n){"use strict";n.d(t,{o:function(){return g}});var a=n(7294),i=n(6367),_=n(3652),l=n(3308),o=n(411),r=n(7074),s=n(3643);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=_.V.extend({defaultProps:{__TYPE:"InputText",__parentMetadata:null,children:void 0,className:null,invalid:!1,variant:null,keyfilter:null,onBeforeInput:null,onInput:null,onKeyDown:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,iconPosition:null},css:{classes:{root:function(e){var t=e.props,n=e.isFilled,a=e.context;return(0,s.AK)("p-inputtext p-component",{"p-disabled":t.disabled,"p-filled":n,"p-invalid":t.invalid,"p-variant-filled":t.variant?"filled"===t.variant:a&&"filled"===a.inputStyle})}}}});function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){!function(e,t,n){var a;(a=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=p(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==p(a)?a:a+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=a.memo(a.forwardRef(function(e,t){var n=(0,l.c)(),p=a.useContext(i.Ou),m=u.getProps(e,p),g=u.setMetaData(f(f({props:m},m.__parentMetadata),{},{context:{disabled:m.disabled,iconPosition:m.iconPosition}})),d=g.ptm,h=g.cx,v=g.isUnstyled;(0,_.e)(u.css.styles,v,{name:"inputtext",styled:!0});var S=a.useRef(t);a.useEffect(function(){s.gb.combinedRefs(S,t)},[S,t]);var b=a.useMemo(function(){return s.gb.isNotEmpty(m.value)||s.gb.isNotEmpty(m.defaultValue)},[m.value,m.defaultValue]),y=s.gb.isNotEmpty(m.tooltip);a.useEffect(function(){var e;b||null!==(e=S.current)&&void 0!==e&&e.value?s.p7.addClass(S.current,"p-filled"):s.p7.removeClass(S.current,"p-filled")},[m.disabled,b]);var E=n({className:(0,s.AK)(m.className,h("root",{context:p,isFilled:b})),onBeforeInput:function(e){m.onBeforeInput&&m.onBeforeInput(e),m.keyfilter&&o.F.onBeforeInput(e,m.keyfilter,m.validateOnly)},onInput:function(e){var t=e.target,n=!0;m.keyfilter&&m.validateOnly&&(n=o.F.validate(e,m.keyfilter)),m.onInput&&m.onInput(e,n),s.gb.isNotEmpty(t.value)?s.p7.addClass(t,"p-filled"):s.p7.removeClass(t,"p-filled")},onKeyDown:function(e){m.onKeyDown&&m.onKeyDown(e),m.keyfilter&&o.F.onKeyPress(e,m.keyfilter,m.validateOnly)},onPaste:function(e){m.onPaste&&m.onPaste(e),m.keyfilter&&o.F.onPaste(e,m.keyfilter,m.validateOnly)}},u.getOtherProps(m),d("root"));return a.createElement(a.Fragment,null,a.createElement("input",c({ref:S},E)),y&&a.createElement(r.u,c({target:S,content:m.tooltip,pt:d("tooltip")},m.tooltipOptions)))}));g.displayName="InputText"},411:function(e,t,n){"use strict";n.d(t,{F:function(){return _}});var a=n(3643);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var _={DEFAULT_MASKS:{pint:/[\d]/,int:/[\d\-]/,pnum:/[\d\.]/,money:/[\d\.\s,]/,num:/[\d\-\.]/,hex:/[0-9a-f]/i,email:/[a-z0-9_\.\-@]/i,alpha:/[a-z_]/i,alphanum:/[a-z0-9_]/i},getRegex:function(e){return _.DEFAULT_MASKS[e]?_.DEFAULT_MASKS[e]:e},onBeforeInput:function(e,t,n){!n&&a.p7.isAndroid()&&this.validateKey(e,e.data,t)},onKeyPress:function(e,t,n){n||a.p7.isAndroid()||e.ctrlKey||e.altKey||e.metaKey||this.validateKey(e,e.key,t)},onPaste:function(e,t,n){if(!n){var a,_=this.getRegex(t);((function(e){if(Array.isArray(e))return i(e)})(a=e.clipboardData.getData("text"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,void 0):void 0}}(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach(function(t){if(!_.test(t))return e.preventDefault(),!1})}},validateKey:function(e,t,n){null!=t&&t.length<=2&&(this.getRegex(n).test(t)||e.preventDefault())},validate:function(e,t){var n=e.target.value,a=!0,i=this.getRegex(t);return n&&!i.test(n)&&(a=!1),a}}}},function(e){e.O(0,[6310,2888,9774,179],function(){return e(e.s=3051)}),_N_E=e.O()}]);